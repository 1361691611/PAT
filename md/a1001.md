---
layout: post
title:  "1001. A+B Format (20)"
categories: PAT-A
tags: [PAT-A]
---
## 题目

> <div id="problemContent">
> <p>Calculate a + b and output the sum in standard format -- that is, the digits must be separated into groups of three by commas (unless there are less than four digits).</p>
> <p><b>Input</b></p>
> <p>Each input file contains one test case.  Each case contains a pair of integers a and b where -1000000 &lt;= a, b &lt;= 1000000.  The numbers are separated by a space.<p>
> <p><b>Output</b></p>
> <p>For each test case, you should output the sum of a and b in one line.  The sum must be written in the standard format. </p>
> <b>Sample Input</b><pre>
> -1000000 9
> </pre>
> <b>Sample Output</b><pre>
> -999,991
> </pre>
> </p></p></div>

## 思路

**2018/1/5更新0：重要参考链接**
Stack overflow有[一个帖子](https://stackoverflow.com/questions/1449805/how-to-format-a-number-from-1123456789-to-1-123-456-789-in-c)专门讨论如何做这个事情，我自己想到的三个也都是问题里几个高票答案的方法，大家可以学习一下。

两个要点：
- 两数和为0时要输出0;
- 注意逗号的输出位置，如不要在数字前面和后面有输出

2018/1/5更新1：

又看了一遍题，总感觉之前的代码太繁琐，就改了一个方法，使用字符串处理。
得到a和b后，将两者之和输入到一个字符串中去，使用`sprintf`函数。
只需要从后向前，每三个数字判断一下是否需要加逗号即可。

2018/1/5更新2：

还有一种更省事的方法，甚至C语言里都有直接的方法处理这种事情。那就是<locale.h>头文件，这个头文件可以处理不同地区或者语言的输出方式，其中就有对数字的处理。具体细节可查看相关资料，代码放在下面
```c
#include <stdio.h>
#include <locale.h>

int main(void)
{
    setlocale(LC_NUMERIC, "");
    printf("%'d\n", 1123456789);
    return 0;
}
```
# 代码
[最新代码@github](https://github.com/OliverLew/PAT/blob/master/PATAdvanced/1001.c)，欢迎交流 ^_^
```c
#include <stdio.h>
#include <string.h>

int main()
{
    int a, b, pos;
    char num[11];
    
    scanf("%d%d", &a, &b);
    sprintf(num, "%d", a + b);
    
    for(pos = strlen(num) - 3; pos > 0 && num[pos - 1] != '-'; pos -= 3)
    {
        memmove(num + pos + 1, num + pos, strlen(num) - pos + 1);
        num[pos] = ',';
    }
    
    puts(num);
    return 0;
}
```

更新前的代码：
```c
#include <stdio.h>
int main()
{
    int a, b, sum, count, dec;
    scanf("%d%d", &a, &b);
    sum = a + b;
    
    if(sum == 0) putchar('0');
    if(sum < 0) { putchar('-'); sum = -sum; }
    
    for(count = 0, dec = 1; sum >= dec; count++, dec *= 10) ;
    
    for(int c = count; c; c--, sum %= dec)
    {
        if(c < count && c % 3 == 0 && c) putchar(',');
        putchar('0' + sum / (dec /= 10));
    }
    
    return 0;
}
```

## 代码

[最新代码@github](https://github.com/OliverLew/PAT/blob/master/PATAdvanced/1001.c)，欢迎交流
```c
#include <stdio.h>
#include <string.h>

int main()
{
    int a, b, pos;
    char num[11];
    
    scanf("%d%d", &a, &b);
    sprintf(num, "%d", a + b);
    
    for(pos = strlen(num) - 3; pos > 0 && num[pos - 1] != '-'; pos -= 3)
    {
        memmove(num + pos + 1, num + pos, strlen(num) - pos + 1);
        num[pos] = ',';
    }
    
    puts(num);
    return 0;
}

```